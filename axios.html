<!DOCTYPE html>
<html>
	<head>
		<title>AXIOS</title>
	</head>
	<body>

		<h3>AXIOS</h1>
		<p>
			Axios is the solution to including a giant
			library like jQuery, when you might only
			be wanting to use it for small functions,
			such as making XHRHttp requests.
		</p>
		<p>
			Fortunately, Axios is one such solution 
			by providing a small library that ONLY
			supports these sorts of functions.
		</p>
		<h3>List of AXIOS Methods:</h3>
		<ul>
			<li>axios.get()</li>
		</ul>

		<button>CLICK</button>

		<section id="comments"></section>

		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

		<script type="text/javascript">

			// Trivia API
			var url = "https://opentdb.com/api.php?amount=1"

			axios.get(url)
			.then(function(res) {
				console.log(res.data.results[0].question);
			})
			.catch(function() {
				console.log("Error")
			});

			// Insert instructor's code

			var btn = document.querySelector("button");
			var section = document.querySelector("#comments");
			btn.addEventListener("click", sendRequest);

			function sendRequest(){
			  axios.get("https://jsonplaceholder.typicode.com/comments", {
			    params: {
			      postId: 1
			    }
			  })
			  .then(addComments)
			  .catch(handleErrors)
			 }

			function addComments(res){
			  res.data.forEach(function(comment){
			    appendComment(comment);
			  });
			}

			function appendComment (comment){
			  var newP = document.createElement("p");
			  newP.innerText = comment.email;
			  section.appendChild(newP);
			}

			function handleErrors(err) {
			    if (err.response) {
			      console.log("Problem With Response ", err.response.status);
			    } else if (err.request) {
			      console.log("Problem With Request!");
			    } else {
			      console.log('Error', err.message);
			    }
			  }

		</script>
	</body>
</html>